## Урок 7: Добавьте регулятора внутреннего рынка ДАО

> Уровень сложности урока: средний.

**Создаваемые на данном уроке модули ДАО:**

- `DAO market regulator`

**Используемые для взаимодействия в данном уроке модули ДАО:**

- `Aira BuilderDAOMarketRegulator` ([abi](https://raw.githubusercontent.com/airalab/core/master/abi/builder/BuilderDAOMarketRegulator.json))
- `DAO market` ([abi](https://raw.githubusercontent.com/airalab/core/master/abi/modules/Market.json))

## Описание урока

При задействовании контракта типа `MarketRegulator` добавление на рынок лота становится возможно только при выполнении условий, установленных регулятором. В данном уроке мы создадим регулятора рынка `DAO market`, который будет разрешать добавление лотов только с токенами, находящимися в реестре ядра ДАО `DAO core`.

**Для того, чтобы  включить регулятора в работу рынка необходимо:**

- обратиться в `DAO factory` к контракту [BuilderDAOMarketRegulator](https://github.com/airalab/core/wiki/API-Reference#builderdaomarketregulator) c названием `Aira BuilderDAOMarketRegulator` указав необходимые параметры: `_shares, _core, _market, _dao_credits`;
- обратиться с аккаунта владельца рынка`owner` к контракту [Market](https://github.com/airalab/core/wiki/API-Reference#market), для вызова функции `setRegulator(true)`, что переведет рынок `DAO market` в режим функционирования с регулятором;
- делегировать рынок `DAO market` регулятору `MarketRegulator`, вызвав метод `delegate()` контракта рынка `DAO market` с адресом регулятора в аргументе.

**После добавления регулятора рынка можно попробовать его в работе. Для этого необходимо:**

- обратиться  в `DAO factory` к контракту `Aira BuilderTokenEmission` для создания нового токена, который будет отражать ценность на вашем рынке
- попробуйте добавить лот с любым количеством токенов на рынок - транзакция завершится ошибкой, ведь токен не добавлен в реестр ядра ДАО
- добавьте токен в реестр ядра ДАО
- попробуйте снова добавить лот с любым количеством токенов на рынок - лот должен добавиться.

> Совет: например в DAO Aira на внутреннем рынке есть предложение токенов кураторства команды Aira для вашей DAO. 1 токен = 1 месяцу поддержки. Придумайте такой токен, который был бы полезен в дальнейшем в работе.

## Проверка умений

> Успешное выполнение урока в официальной сети даст: 100 `air`

Для прохождения данного урока, необходимо обратиться к контракту `Lesson 7`, для вызова функции `Execute()` указав `адрес рынка`, который вы создали.

### Пример выполнения

- [Go-Ethereum](go-ethereum_samples.md#Урок-7)
